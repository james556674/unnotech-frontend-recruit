(function (t) { function e(e) { for (var o, i, c = e[0], u = e[1], s = e[2], p = 0, f = []; p < c.length; p++)i = c[p], Object.prototype.hasOwnProperty.call(r, i) && r[i] && f.push(r[i][0]), r[i] = 0; for (o in u) Object.prototype.hasOwnProperty.call(u, o) && (t[o] = u[o]); l && l(e); while (f.length) f.shift()(); return a.push.apply(a, s || []), n() } function n() { for (var t, e = 0; e < a.length; e++) { for (var n = a[e], o = !0, c = 1; c < n.length; c++) { var u = n[c]; 0 !== r[u] && (o = !1) } o && (a.splice(e--, 1), t = i(i.s = n[0])) } return t } var o = {}, r = { app: 0 }, a = []; function i(e) { if (o[e]) return o[e].exports; var n = o[e] = { i: e, l: !1, exports: {} }; return t[e].call(n.exports, n, n.exports, i), n.l = !0, n.exports } i.m = t, i.c = o, i.d = function (t, e, n) { i.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n }) }, i.r = function (t) { "undefined" !== typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, i.t = function (t, e) { if (1 & e && (t = i(t)), 8 & e) return t; if (4 & e && "object" === typeof t && t && t.__esModule) return t; var n = Object.create(null); if (i.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var o in t) i.d(n, o, function (e) { return t[e] }.bind(null, o)); return n }, i.n = function (t) { var e = t && t.__esModule ? function () { return t["default"] } : function () { return t }; return i.d(e, "a", e), e }, i.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, i.p = "/books/"; var c = window["webpackJsonp"] = window["webpackJsonp"] || [], u = c.push.bind(c); c.push = e, c = c.slice(); for (var s = 0; s < c.length; s++)e(c[s]); var l = u; a.push([0, "chunk-vendors"]), n() })({ 0: function (t, e, n) { t.exports = n("56d7") }, "034f": function (t, e, n) { "use strict"; n("85ec") }, "56d7": function (t, e, n) { "use strict"; n.r(e); n("e260"), n("e6cf"), n("cca6"), n("a79d"); var o = n("2b0e"), r = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { attrs: { id: "app" } }, [n("router-view")], 1) }, a = [], i = (n("034f"), n("2877")), c = {}, u = Object(i["a"])(c, r, a, !1, null, null, null), s = u.exports, l = n("8c4f"), p = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("h1", [t._v("404 Page Not Found")]) }, f = [], b = {}, d = Object(i["a"])(b, p, f, !1, null, null, null), m = d.exports, v = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "main-container" }, [n("h2", [t._v("Book List")]), n("BookList")], 1) }, k = [], h = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "main-container" }, [n("div", { staticClass: "book-list" }, t._l(t.books, (function (e) { return n("div", { key: e.id, staticClass: "book-card" }, [n("router-link", { attrs: { to: { name: "book-detail-page", params: { id: e.id } } } }, [n("img", { attrs: { src: e.image } }), n("div", { staticClass: "book-name" }, [t._v(t._s(e.name))])])], 1) })), 0)]) }, g = [], D = n("1da1"), w = (n("96cf"), n("bc3a")), _ = n.n(w), x = n("3d20"), y = n.n(x), O = "https://fe-interview-api.unnotech.com", P = _.a.create({ baseURL: O }), j = y.a.mixin({ toast: !0, position: "top-end", showConfirmButton: !1, timer: 3e3 }), C = { getBooks: function () { return P.get("/books") }, getBookDetail: function (t) { var e = t.bookId; return P.get("/profile/".concat(e)) }, editBookDetail: function (t) { var e = t.bookId, n = t.formData; return P.patch("/profile/".concat(e), n, { headers: { "Content-Type": "application/json" } }) } }, B = { data: function () { return { books: [] } }, created: function () { this.fetchData() }, methods: { fetchData: function () { var t = this; return Object(D["a"])(regeneratorRuntime.mark((function e() { var n; return regeneratorRuntime.wrap((function (e) { while (1) switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, C.getBooks(); case 3: n = e.sent, t.books = n.data, e.next = 10; break; case 7: e.prev = 7, e.t0 = e["catch"](0), j.fire({ icon: "error", title: "無法取得資料，請稍後再試" }); case 10: case "end": return e.stop() } }), e, null, [[0, 7]]) })))() } } }, $ = B, R = (n("e078"), Object(i["a"])($, h, g, !1, null, "003e287d", null)), S = R.exports, E = { components: { BookList: S } }, L = E, N = Object(i["a"])(L, v, k, !1, null, null, null), I = N.exports, M = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "main-container" }, [n("h2", [t._v("Book Detail")]), n("BookList"), n("div", [n("form", { staticClass: "book-detail-wrapper", on: { submit: function (e) { return e.stopPropagation(), e.preventDefault(), t.handleSubmit(e) } } }, [n("div", { staticClass: "book-detail" }, [n("div", { staticClass: "form-group" }, [n("label", { attrs: { for: "quantity" } }, [t._v("價格 :")]), n("button", { on: { click: function (e) { return e.stopPropagation(), e.preventDefault(), t.plusPrice() } } }, [t._v("+")]), n("input", { directives: [{ name: "model", rawName: "v-model", value: t.bookDetail.price, expression: "bookDetail.price" }], attrs: { type: "number", id: "price", name: "price", min: "0" }, domProps: { value: t.bookDetail.price }, on: { input: function (e) { e.target.composing || t.$set(t.bookDetail, "price", e.target.value) } } }), n("button", { on: { click: function (e) { return e.stopPropagation(), e.preventDefault(), t.minusPrice() } } }, [t._v("-")])]), n("div", { staticClass: "form-group" }, [n("label", { attrs: { for: "quantity" } }, [t._v("數量 :")]), n("button", { on: { click: function (e) { return e.stopPropagation(), e.preventDefault(), t.plusCount() } } }, [t._v("+")]), n("input", { directives: [{ name: "model", rawName: "v-model", value: t.bookDetail.count, expression: "bookDetail.count" }], attrs: { type: "number", id: "count", name: "count", min: "0" }, domProps: { value: t.bookDetail.count }, on: { input: function (e) { e.target.composing || t.$set(t.bookDetail, "count", e.target.value) } } }), n("button", { on: { click: function (e) { return e.stopPropagation(), e.preventDefault(), t.minusCount() } } }, [t._v("-")])])]), n("button", { staticClass: "form-submit", attrs: { type: "submit" } }, [t._v("確認修改")])])])], 1) }, T = [], J = (n("a9e3"), n("159b"), { components: { BookList: S }, data: function () { return { bookDetail: {} } }, created: function () { var t = this.$route.params.id; this.fetchBookDetailData(t) }, beforeRouteUpdate: function (t, e, n) { var o = t.params.id; this.fetchBookDetailData(o), n() }, methods: { fetchBookDetailData: function (t) { var e = this; return Object(D["a"])(regeneratorRuntime.mark((function n() { var o; return regeneratorRuntime.wrap((function (n) { while (1) switch (n.prev = n.next) { case 0: return n.prev = 0, n.next = 3, C.getBookDetail({ bookId: t }); case 3: o = n.sent, e.bookDetail = o.data, n.next = 10; break; case 7: n.prev = 7, n.t0 = n["catch"](0), j.fire({ icon: "error", title: "無法取得資料，請稍後再試" }); case 10: case "end": return n.stop() } }), n, null, [[0, 7]]) })))() }, handleSubmit: function (t) { var e = this; return Object(D["a"])(regeneratorRuntime.mark((function n() { var o, r, a, i, c, u; return regeneratorRuntime.wrap((function (n) { while (1) switch (n.prev = n.next) { case 0: if (n.prev = 0, !(Number(e.bookDetail.price) < 0 || Number(e.bookDetail.count) < 0)) { n.next = 4; break } return j.fire({ icon: "warning", title: "價格與數量不能小於 0" }), n.abrupt("return"); case 4: return o = t.target, r = new FormData(o), a = {}, r.forEach((function (t, e) { a[e] = t })), i = JSON.stringify(a), n.next = 11, C.editBookDetail({ bookId: e.bookDetail.id, formData: i }); case 11: if (c = n.sent, u = c.data, j.fire({ icon: "success", title: "資料更新成功" }), u) { n.next = 16; break } throw new Error(u.message); case 16: n.next = 21; break; case 18: n.prev = 18, n.t0 = n["catch"](0), j.fire({ icon: "error", title: "無法更新資料，請稍後再試" }); case 21: case "end": return n.stop() } }), n, null, [[0, 18]]) })))() }, plusCount: function () { this.bookDetail.count++ }, minusCount: function () { this.bookDetail.count-- }, plusPrice: function () { this.bookDetail.price++ }, minusPrice: function () { this.bookDetail.price-- } } }), q = J, F = (n("768a"), Object(i["a"])(q, M, T, !1, null, "43e32f0c", null)), U = F.exports; o["a"].use(l["a"]); var z = [{ path: "/", name: "root", redirect: "/books" }, { path: "/books", name: "book-list-page", component: I }, { path: "/books/:id", name: "book-detail-page", component: U }, { path: "*", name: "not-found", component: m }], A = new l["a"]({ routes: z }), G = A; o["a"].config.productionTip = !1, new o["a"]({ router: G, render: function (t) { return t(s) } }).$mount("#app") }, 7121: function (t, e, n) { }, "768a": function (t, e, n) { "use strict"; n("db1f") }, "85ec": function (t, e, n) { }, db1f: function (t, e, n) { }, e078: function (t, e, n) { "use strict"; n("7121") } });
//# sourceMappingURL=app.17ff914e.js.map